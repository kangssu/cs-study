# 5. CPU 성능 향상 기법

### 클럭
컴퓨터 부품들은 클럭 신호에 맞춰서 움직이는데 클럭 신호의 속도가 높아지면 CPU의 명령어 사이클을 더 빠르게 반복되기 때문에 이 속도에 맞춰서 작동할 것이다.

클럭 속도 = CPU의 속도, 헤르츠(Hz) 단위로 측정되며 1초에 클럭이 반복되는 횟수라고 보면 된다.(1초에 1번 반복되면 1Hz, 1초에 100번 반복되면 100Hz)

#### 💡 그렇다면, 클럭 신호를 높인다면 CPU가 무한대로 빨라질까?
그렇진 않다. 클럭을 필요 이상으로 높이면 발열이 심해진다. 예를 들어 영상 편집등 장시간을 하게 되면 발열이 높아지는 것을 알 수 있다. 그렇기 때문에 클럭 속도를 높이는 것은 CPU를 빠르게 만들지만 클럭 속도만으로 CPU 성능을 올리는 것엔 한계가 있다.

</br>

### 코어와 멀티 코어
* 전통적으로는 명령어를 실행하는 부품은 하나만 존재했지만 현재 CPU에는 명령어를 실행하는 부품이 여러개 존재하며 해당 명칭을 **코어**라고 한다.

![core](https://github.com/kangssu/cs-study/assets/83870420/5f72d5df-eece-4656-aa1c-a0709bbe87cf)

* 코어 수에 비례해서 속도가 빨라지지는 않는다.
* 예를 들어, 조별 과제의 경우 4명일 때 생산성이 x4가 될 수도 있지만.. 상황에 따라 x2가 될 수도 있기 때문이다. 즉, 코어마다 처리할 연산이 적절하게 분배되지 않는다면 코어 수에 비례해서 연산 속도가 증가하지는 않는다.

</br>

### 스레드와 멀티 스레드
* 스레드는 하드웨어적 스레드와 소프트웨어적 스레드가 존재한다.

#### (1) 하드웨어 스레드(= 논리 프로세서)
* **하나의 코어가 동시에 처리하는 명령어 단위**로 1코어가 한 번에 하나의 명령어만을 처리한다면 1코어 1스레드 CPU이고, 2코어가 한 번에 두개의 명령어를 처리한다면 2코어 4스레드 CPU이다.
* 만약 1개의 코어가 2개의 스레드를 처리한다면 멀티 스레드 프로세서, 멀티스레드 CPU라고 부른다.

#### 💡 멀티 스레드 프로세서를 구성하기 위해서는?
* 실제로 설계하기에는 어려운 일이지만 가장 큰 핵심은 **레지스터**이다.
* 하나의 명령어를 실행하기 위해 꼭 필요한 레지스터들은 레지스터 세트이다.(레지스터 세트는 프로그램 카운터, 명령어 레지스터, 메모리 주소 레지스터, 메모리 버퍼 레지스터 묶음이다.)
* 하나의 코어 내부에 레지스터 세트가 여러 개가 있다면 하나의 코어가 여러 개의 명령어를 동시에 처리할 수 있다.
* 예를 들어, 하나의 코어 내부에 프로그램 카운터가 2개일 경우에 다음으로 실행할 명령어의 주소를 2개 저장할 수가 있다.
* 메모리의 입장에서는 몇 코어/몇 스레드인지는 알 수 없다. 대신 2코어 4스레드일 경우에 명령어를 한 번에 4개씩 실행해주는 것까지만 알고 있기 때문에 논리 프로세서라고도 부른다.

![cpu](https://github.com/kangssu/cs-study/assets/83870420/26cf272f-b386-40dd-98c1-958677c36c08)

💡 위 이미지에서 논리 프로세서는 16개이기 때문에 한 번에 16개씩 실행해주는 것으로 이해하면 된다.

</br>

#### (2) 소프트웨어적 스레드
* **하나의 프로그램에서 독립적으로 실행되는 단위**로 한 프로그램이 순차적으로 실행되는 구조를 싱글 스레드, 하나의 프로그램에서 동시에 두개의 영역이 실행되는 구조를 멀티 스레드라고 한다.
* 예를 들어, 사용자가 입력한 내용을 보여주는 기능/사용자가 입력한 내용의 맞춤법 검사 기능/사용자가 입력한 내용 저장하는 기능일 때 하나의 프로그램(=메모리)에서 3개의 실행흐름이 동시에 진행된다.
* 1코어 1스레드여도 여러 소프트웨어적 스레드를 만들 수 있다.
* 나중에 운영체제에서 다시...



